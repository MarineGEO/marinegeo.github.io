{% assign sorted = site.project-modules | sort: 'title' %}
<h1>Modules</h1>

{% if page.modules == "ALL" %}
  {% assign selection = site.project-modules %}
{% else %}
  {% assign selection = "" | split: ',' %}
  {% for m in page.modules %}
    {% for module in sorted %}
      {% if m == module.id %}
        {% assign selection = selection | push: module %}
      {% endif %}
    {% endfor %}
  {% endfor %}
{% endif %}

<div class="contaner">
<div class="row" style="display: flex;flex-wrap: wrap;">
{% for module in selection %}
  <div class="col-md-3 col-sm-4 col-xs-6">
  <!-- <div class="col-md-3 col-sm-4 col-xs-6" style="height: 225px;"> -->
    <a href="{{site.baseurl}}{{module.url}}">
         {% if module.thumbnail %}
        <!-- <div style="background-color: #97C8EB; border-radius: 50%; width: 150px; position: relative; left: 50%; top: 50%; margin-left: -75px;"> -->
        <div style="background-color: #97C8EB; border-radius: 50%; width: 150px; display:block; margin:auto;">
          <img src="{{site.baseurl}}/assets{{module.url}}/{{module.thumbnail}}" alt="Module Icon"
          class="img-responsive" style="height: 150px; position: relative; left: 50%; top: 50%; margin-left: -75px; width=100%;">
        </div>
        {% else %}
        <div style="display:block; margin:auto;">
          <img src="{{site.baseurl}}{{site.default-thumbnail}}"  alt="Default Module Icon"
          class="img-responsive" style="height: 150px; position: relative; left: 50%; top: 50%; margin-left: -75px; width=100%;">
        </div>
        {% endif %}
      <div>
        <h4 style="text-align:center; vertical-align: bottom;">{{module.title}}</h4>
      </div>
    </a>
  </div>
{% endfor %}
</div>
</div>
